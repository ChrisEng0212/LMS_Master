{% extends "layout.html" %}

{% block content %}

<div id="vue-app">


<div class="content-section">
<audio id="aud" src="" controls ></audio>

<video style="width:100%" id="vid" src="" controls ></video>


    <legend class="border-bottom mb-4">Post Listen: Dubbing Controls ([[device]]) </legend>

    Record: &nbsp;
        <div>
                <div  v-if="rec1.start">
                    <button  class="btn btn-success" @click="start(), clip('mute')" >Start</button>
                </div>
                <div  v-if="rec1.save" style="float: left;">
                    <button  class="btn btn-info" style="margin-right:5px" @click="save()">Upload</button>
                </div>

                <div  v-if="rec1.save" style="float: left;">
                    <button  class="btn btn-secondary" style="margin-right:5px" @click="clip('dub')">Test Dub</button>
                </div>
                <div  v-if="rec1.save" style="float: left;">
                    <button  class="btn btn-secondary" style="margin-right:5px" @click="clip('shadow')">Test Shadow</button>
                </div>
                <div  v-if="rec1.cancel">
                    <button  class="btn btn-danger" @click="cancel()" >Cancel</button>
                </div>
        </div>
        <br>

        <div :style="rec1.t_style">
            <span class="ml-2" style="color:white" > [[ rec1.count ]] </span>
        </div>
          <br>

        <div>
            Play Video: &nbsp;
            <button  class="btn btn-success" @click="clip('sound')" >Sound On</button> &nbsp; &nbsp;
            <button  class="btn btn-warning" @click="clip('mute')" >Muted </button>
            <br>
            <br>

            <div v-if="blobURL || movieData['audio']">
             Check Dubbing: &nbsp;
            <button  class="btn btn-info" style="margin-right:5px" @click="clip('shadow')">Shadow</button>   &nbsp; &nbsp;
            <button  class="btn btn-info" style="margin-right:5px" @click="clip('dub')">Dubbed</button>
            <br>
            <br>
            </div>

            Stop: &nbsp;
            <button  class="btn btn-danger" style="margin-right:5px" @click="clip('cancel')">Stop</button>
            <br>
            <br>

        </div>
        <br>

Script:
    <br>
    <div v-for="line in mObj.script">
        <h6> [[ line ]] </h6>

    </div>
</div>

<span id="user" style="display:none">{{current_user.username}}</span>
<span id="mString" style="display:none">{{mString}}</span>
<span id="mData" style="display:none">{{mData}}</span>

</div> <!-- end of Vue app -->



{% endblock %}

{% block script %}
<script type="text/javascript" src="{{url_for('static', filename= 'js/Mp3LameEncoder.js')}}"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script>
<script type="text/javascript" src="{{url_for('static', filename= 'js/dubbing.js')}}"></script>
{% endblock %}