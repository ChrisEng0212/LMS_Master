{% extends "layout.html" %}

{% block content %}

<div id="vue-app">

<div class="content-section">
        <h1> Movie Projects </h1>

        <div class="embed-responsive embed-responsive-4by3">
                <iframe id="questions_embed" src="https://docs.google.com/presentation/d/e/2PACX-1vSGKLyLYZRgqs6P9vMUi5iOjRsZhJW8tXGx6CmtwmXU-RvHPDQSsvS1D8JFvNqMIbyZDHXQfhjjdTXv/embed"
                allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true">
                </iframe>
        </div>

</div>

<div class="content-section">

  <legend class="border-bottom mb-4"> Your Projects: </legend>


  <div style="overflow-x:auto;">
      <table class="table table-sm">
        <thead>
            <tr>
              <th scope="col" >Movie</th>
              <th scope="col" >WU</th>
              <th scope="col" >1stL</th>
              <th scope="col" >2ndL</th>
              <th scope="col" >3rdL</th>
              <th scope="col" >Dub</th>
            </tr>
        </thead>

        <tbody>
            <template v-for="(movie, number) in mObj">
                <tr>
                  <td> [[movie]] </td>
                  <td> <button class="btn btn-info btn-sm" @click="goTo('nme_mov', number, 0)"> 0 </button></td>
                  <td> <button class="btn btn-info btn-sm" @click="goTo('nme_mov', number, 1)"> 1 </button></td>
                  <td> <button class="btn btn-info btn-sm" @click="goTo('nme_mov', number, 2)"> 2 </button></td>
                  <td> <button class="btn btn-info btn-sm" @click="goTo('nme_mov', number, 3)"> 3 </button></td>
                  <td>
                  <button class="btn btn-info btn-sm" @click="goTo('nme_mov', number, 4)"> Dub </button>

                  <button class="btn btn-danger btn-sm" @click="goTo('nme_mov', number, 5)"> iPhone(?) </button>

                  </td>
                </tr>
            </template>
        </tbody>

      </table>
    </div>


  </div>


</div>

<span id="user" style="display:none">{{current_user.username}}</span>
<span id="mString" style="display:none">{{mString}}</span>

</div> <!-- end of Vue app -->


{% endblock %}

{% block script %}

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script>

<script type="text/javascript" >

var mString = document.getElementById('mString').innerHTML

var mObj = JSON.parse(mString)
console.log('mObj', mObj);


startVue()

function startVue(){ new Vue({

    el: '#vue-app',
    delimiters: ['[[', ']]'],
    mounted: function(){
    },
    data: {
        mObj: mObj,
    },
    methods: {
        goTo: function(task, part, movie ) {

          let name = document.getElementById('user').innerHTML

          var str = window.location.href

          let url = (str).split('nme_')[0] + task + '/' + part + '/' + movie
          console.log('goTO', url);
            window.location = url
            console.log('DONE');
        }
    }
})// end NEW VUE



}// endFunction

</script>

{% endblock %}

