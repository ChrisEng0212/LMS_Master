{% extends "layout.html" %}

{% block content %}
    
<div class="content-section">    
        <h1 > Assignment {{unit}} </h1>
    </div>
    <div class="content-section">
    <div class="embed-responsive embed-responsive-4by3">
            <iframe id="questions_embed" src="{{source.assSource}}"
            allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true">
	        </iframe>
    </div> 
</div>
        
    {% if fields.Grade == 2 %}
    <div class="content-section">
      <h4> ASSIGNMENT COMPLETED </h4>
    </div>
    {% else %}            
    {% endif %}
    
    <div class="content-section" style="background:pink">
      <h6> Microphone problems? Use <a href="https://{{siteName}}.herokuapp.com/assignments"> https:// </a> to make site secure. Also, disconnect <text style="color:blue"> Bluetooth Earphones</text></h6>
      <h6> *If Chrome doesn't let you use the microphone then it is recommended to use <a href="https://play.google.com/store/apps/details?id=com.brave.browser&hl=en", target="_blank"> Brave Privacy Browser</a></h6>
    </div>
    
    <!-- /////////Required JSON Assignment Number///////////////// -->
    <input type="text"  id="assNumber" value="{{unit}}" style="display:none">
    
    <div class="">                              
        <audio id="modelAudio" autoplay src=""></audio> 
    </div>     


        <div class="content-section">   
              <h2 style="display: inline-block"> Task 1 Pronunciation Practice </h2>              
            <button id="modelBtn1" type="button" class="btn btn-default btn-sm" style="float:right;" value="{{speechModel.AudioDataOne}}" onclick="modelPlay(1)">Instructor <br> Model</button>	
            

            {% if count == 0  %}
            <div class="">                              
                <audio id="audioTask1" src=""></audio> 
            </div>                         
            {% else %}
              <div class="">	
                {% if fields.AudioDataOne != "" %}
                    {% if fields.LengthOne > 1 %}                                                 
                    <div class="">                              
                        <audio id="audioTask1" controls src="{{fields.AudioDataOne}}"></audio> 
                    </div>                    
                    <div class="box-section">
                        {% if 20 > form.LengthOne.data %}  
                        <h4 style="color:red"> Just {{form.LengthOne.data}} secs <p>(please check)</p>  </h4>
                        {% else %}
                        <h4 style="color:orange"> {{form.LengthOne.data}} secs </h4>
                        {% endif %}
                    </div>
                    {% else %}
                    <div class="">                              
                        <audio id="audioTask1" src=""></audio> 
                    </div>   
                    <div class="">                              
                        <label class="btn btn-lg btn-link" style="margin-left:20px">
                            <a  href="{{fields.AudioDataOne}}" target="_blank">Shared Link 1</a> 
                        </label>
                    </div>
                    {% endif %}
                {% endif %}
            </div>                                       
            {% endif %}

            <!-- Android Record Task 1 -->
            <div class="">  
                    <div class="">				
                        <audio id="android1" type="audio/mpeg"></audio>
                    </div>
                    <br>
                    <div class=row>	
                            <div class="col-sm-6">				
                                <button class="btn btn-success" id="startAn1" onclick="AnRecord('1'); Source('1')">Start</button>
                                <button class="btn btn-outline-danger" id="stopAn1" disabled>Stop</button>
                                <button class="btn btn-info" id="saveAn1" onclick="submit()" disabled>Save</button>
                                <button class="btn btn-secondary-outline" onclick="cancel()">Cancel</button>
                            </div> 
                    </div>            
            </div>
        <br>
                
        <div class=""> <!--////UPLOAD////-->
            <button class="btn btn-primary btn-sm" type="button" style="width:6rem" data-toggle="collapse" 
                        data-target="#upload1" aria-expanded="false" onclick="Source('1')">
                        Upload/Link  <!-----UPLOAD-------------------------------------------------------------->
            </button> 

                <div id="upload1" class="collapse">
                    
                          <h6> *Upload files from phone </h6>
                          <div class="">                      
                            <label class="btn btn-secondary btn-info" style="margin-left:10px">
                                <input  type="file" name="options" id="btnUpload1" onchange="fileValidation('1')" > Upload File  <!--accept=audio removed-->
                            </label>
                          </div> 

                          <h6> *Or share a link to your file</h6>
                          <label class="btn btn-default" id="labelLink1">
                                <input name="options" id="linkInput1"></input>
                          </label>   
                          <label class="btn">
                             <button class="btn btn-outline-info btn-sm" type="button" onclick="saveLink('1')"> Save Link </button>                                            
                          </label>
                </div>

          </div><!--////UPLOAD END////-->

</div>  <!---content section div --> 
      
                       
            

              <form method="POST" action="" enctype="multipart/form-data">
                  {{ form.hidden_tag() }}
              
                  
                  <fieldset class="form-group">                           
                          <div class="content-section">                                 
                                <div class="form-group"> 
                                        {{ form.Notes.label (class="form-control-label")}} <p>(if you would like to make notes to help your speaking or review)</p>
                                        {{ form.Notes(class="form-control form-control-lg")}}                                      
                                </div> 
          
                                      <div style="display:none">
                                          <div class="form-group"> 
                                              {{ form.AudioDataOne.label (class="form-control-label")}}                            
                                              {{ form.AudioDataOne(class="form-control form-control-lg", id="audioData01")}}                                                       
                                          </div>
                                          <div class="form-group"> 
                                              {{ form.LengthOne.label (class="form-control-label")}}                            
                                              {{ form.LengthOne(class="form-control form-control-lg", id="audioLen01")}}                                                       
                                          </div>                                           
                                          <div class="form-group"> 
                                              {{ form.AudioDataTwo.label (class="form-control-label")}}                            
                                              {{ form.AudioDataTwo(class="form-control form-control-lg", id="audioData02")}}                                                      
                                          </div>
                                          <div class="form-group"> 
                                              {{ form.LengthTwo.label (class="form-control-label")}}                            
                                              {{ form.LengthTwo(class="form-control form-control-lg", id="audioLen02")}}                                                       
                                          </div>                                           
                                            
                                                                         
                                      </div> 
                          </div>
          
                          <div class="content-section">
                              <h2> Task 3 Writing Practice </h2>
                                    <div class="form-group"> 
                                      {{ form.TextOne.label (class="form-control-label")}}
                                          {% if form.TextOne.errors %}
                                              {{ form.TextOne (class="form-control form-control-lg is-invalid")}}  <!-- is invalid is the class-->
                                              <div class="invalid-feedback">
                                                  {% for error in form.TextOne.errors %}
                                                      <span>Error Occurred</span>
                                                  {% endfor %}
                                              </div>                          
                                          {% else %}
                                              {{ form.TextOne(class="form-control form-control-lg")}}
                                          {% endif %}                           
                                    </div>
                              
                                    <div class="form-group"> 
                                        {{ form.TextTwo.label (class="form-control-label")}}
                                            {% if form.TextTwo.errors %}
                                                {{ form.TextTwo (class="form-control form-control-lg is-invalid")}}  <!-- is invalid is the class-->
                                                <div class="invalid-feedback">
                                                    {% for error in form.TextTwo.errors %}
                                                        <span>Error Occurred</span>
                                                    {% endfor %}
                                                </div>                          
                                            {% else %}
                                                {{ form.TextTwo(class="form-control form-control-lg")}}
                                            {% endif %}                           
                                    </div>
          
                              <div class="form-group">
                                  {{ form.Submit(class="btn btn-info", id="submit")}}
                              </div>
                          </div>
                  </fieldset>  
              </form>
          
          </div>   
             
    {% endblock content %}

     
    {% block script %}    

    <script type="text/javascript" src="{{url_for('static', filename= 'js/BasicRec.js')}}"></script>     
    <script type="text/javascript" src="{{url_for('static', filename= 'js/AndroidRec.js')}}"></script> 

    {% endblock %} 
      
    
  
 