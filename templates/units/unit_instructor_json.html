{% extends "layout.html" %}

{% block content %}
<!--Header of page____________________________________-->
<div class="content-section">    
	<h1 > {{source.title}} (Q:{{source.qnum}})</h1>
</div>


<div class="content-section">  
	<div style="display:none">
      
	   <input id="qNum" value="{{qNumber}}" >
	   <input id="unit_num" value="{{unit_num}}" > 
	   <input id="part_num" value="{{part_num}}" >
    </div>

	<h1 id="percent"></h1>
	<br>
	<h5><pre id="scores"></pre></h5>

<table class="table" style="table-layout:fixed; width:100%">
        <thead>
            <tr>
			{% for i in range (teamcounter)%}                           
              <th scope="col" style="font-size:20px">{{i+1}}</th>  
			{% endfor %}                                                       
            </tr>
        </thead>
       
        <tbody>               
            <tr> 
				{% for i in range (teamcounter)%}                           
              	<th scope="col" style="font-size:20px; color:{{titleColor}}"><p id="{{i+1}}"></p></th>  
				{% endfor %}   
            <tr>                     
        </tbody>

    </table> 	
 	
</div>
<!--Materials_________________________________________-->

<div class="content-section">
		<button type="button" class="btn" style="background:{{titleColor}}; color:white" data-toggle="collapse" data-target="#notes">Notes</button>
		 <br>
		 <div class="collapse" id="notes">
		 	<div class="embed-responsive embed-responsive-4by3">
		  		<iframe src="{{source.notes}}" 
		  			allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true">
		  		</iframe>
			</div>
	  	 </div>	   
</div>

<div class="content-section">	
{% for i in range(1,qNumber+1) %}

<div class="content-section" style="background:whitesmoke"> 
<h2 style="color:blue" align="center"> {{i}}: {{jdata[i|string]['w']}} <h2> 
<h3 style="color:{{titleColor}}" align="center"> {{jdata[i|string]['e']}} </h3> 
<h4 style="color:hotpink" align="center"> {{jdata[i|string]['d']}} </h4> 
<div align="center">
	<img style="max-width:100%" src="{{jdata[i|string]['i']}}"> 
</div>
{% if jdata[i|string]['f'] %}
<div class="embed-responsive embed-responsive-4by3">
		  		<iframe src="{{jdata[i|string]['f']}}" 
		  			allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true">
		  		</iframe>
</div>
{% endif %}

<h4><a href="{{jdata[i|string]['l']}}"> {% if jdata[i|string]['l'] %} Link {% endif %} </a></h4>
<h4 style=""> {{jdata[i|string]['x']}} </h4> 
<h4 style="background:{{titleColor}}; color:{{bodyColor}}"> {{jdata[i|string]['q']}} </h4> 
<h4 style=""> {{jdata[i|string]['c1']}} </h4>
<h4 style=""> {{jdata[i|string]['c2']}} </h4> 

</div> 

	
		<section class="content-section">

		<legend class="border-bottom mb-4">Question {{i}}</a></legend>
    
												
			<table class="table table-sm" >
			<tbody>				
				{% for j in range(dictCount) %}
				<tr>
				<th>{{ ansDict[j][0] }}</th>
				<th>{{ ansDict[j][i] }}</th>
				</tr>
				{% endfor %}
			</tbody>
			</table>	
			
		</section>					
{% endfor %}

</div> 



{% endblock content %}


{% block script %}

<script>        

    var myVar = setInterval(partCheck, 5000);
    
    function partCheck() {		
		$.ajax({
			data : {
				qNum : $('#qNum').val(), unit_num : $('#unit_num').val(), part_num : $('#part_num').val()
			},
			type : 'POST',
            url : '/partCheck', 
           
		})
		.done(function(data) {            
			
            document.getElementById('percent').innerHTML =  'Percent Complete: ' + data.percent + ' %' 
			for (var key in data.scoreDict){
					var factor = data.scoreDict[key].length					
					var str = "&#9830<br>"
					var strf = "&#9786<br>"
					if (factor == data.qNum) { 
						document.getElementById(key).innerHTML = strf.repeat(factor)
					}
					else {
						document.getElementById(key).innerHTML = str.repeat(factor)
					}			
			}   
			
		});
	
    }

</script>

{% endblock %}