{% extends "layout.html" %}

{% block content %}



<div class="content-section">
    <legend class="border-bottom mb-4"><a href="../admin/user", target="_blank">Students</a></legend>
    
    
    <table class="table table-sm">
      <thead>
        <tr>
          <th scope="col">Profile</th>
          <th scope="col">Student Name</th>
          <th scope="col">ID</th>   
          <th scope="col">Att</th>           
          <th scope="col">Email</th>                
          <th scope="col">Unt</th>
          <th scope="col">Ass</th>         
        </tr>
      </thead>

      <tbody>
      {% for s in sDict %}       
          <tr>              
            <td><img class="rounded-circle chat-img" src="{{S3_LOCATION}}{{sDict[s]['img']}}"></td>
            <td style="width: 100px;"><a href="/inchat/{{s}}"> {{s}}</a> </td>
            <td>{{sDict[s]['idn']}}</td>   
            {% if s.att == 'Absent' %} <td style="background:pink">{% elif s.att == 'On time' %} <td style="background:mediumaquamarine">{% else %} <td style="background:gainsboro">{% endif %} {{sDict[s]['att']}} </td>          
            <td><a href="{{sDict[s]['eml']}}">Email</a></td> 
            <td><button id="{{sDict[s]['units']}}" name="units" class="btn btn-dark"  disabled></button></td> 
            <td><button id="{{sDict[s]['assess']}}" name="asses"  class="btn btn-dark" disabled> </button> </td>                   
          </tr>   
      {% endfor %}
      </tbody>
      </table>
  </div>             

<span style="display:none" id="units"> {{maxU}} </span>
<span style="display:none" id="asses"> {{maxA}} </span>

{% endblock content %}

{% block script %}

<script> 

colorator('units')
colorator('asses')


function colorator(type) {

let max = document.getElementById(type)

let buttons = document.getElementsByName(type)

buttons.forEach(function(btn){
  var color = btn.id / max 

      if (color < .4) {
        btn.style.background='#E74C3C'; 
      } else if (color < .6 ) {
        btn.style.background='#E59866'; 
      } else if (color < .8 ) {
        btn.style.background='#BB8FCE'; 
      } else if (color < 1) {
        btn.style.background='#17A589'; 
      } else {
        btn.style.background='#229954'; 
      }
  }) // end foreach

} // end colorator
       

</script>

{% endblock %}  